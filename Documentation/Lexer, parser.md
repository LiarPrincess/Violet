# Lexer

Lexer is responsible for transforming Python source code into a stream of tokens.

## References

- [docs.python.org/Lexical analysis](https://docs.python.org/3/reference/lexical_analysis.html)
- CPython
    - [Include/token.h](https://github.com/python/cpython/blob/3.6/Include/token.h)
    - [Parser/tokenizer.c](https://github.com/python/cpython/blob/3.6/Parser/tokenizer.c)

# Parser

Parser is responsible for transforming a stream of tokens to `AST`.

- We implemented a standard [recursive descent parser](https://en.wikipedia.org/wiki/Recursive_descent_parser) (+minor hacks for ambiguous grammar).
- The same [Grammar file](https://github.com/python/cpython/blob/3.6/Grammar/Grammar) as CPython 3.6
- `AST` type definitions are generated by [Elsa](https://github.com/LiarPrincess/Violet/tree/main/Sources/Elsa) from [Definitions/ast.letitgo](Definitions/opcodes.letitgo](https://github.com/LiarPrincess/Violet/tree/main/Elsa%20definitions))
- `AST` implements pretty printer interface from [Rapunzel](https://github.com/LiarPrincess/Violet/Sources/Rapunzel)
- Each function that implements specific grammar rule has this rule in doc-comment
- It will use standard lexer for [fstring](https://www.python.org/dev/peps/pep-0498/) expressions (we get fstring as `formatString(String)` token and we need to break this string into strings and literals)

Please note that CPython plans to switch to [PEG parser](https://en.wikipedia.org/wiki/Parsing_expression_grammar) (see [PEP-0617](https://www.python.org/dev/peps/pep-0617/)), but this endeavour is not yet finished thus we can't use it.

## References

- [docs.python.org/Language reference](https://docs.python.org/3/reference/index.html)
- [greentreesnakes/Meet the Nodes](https://greentreesnakes.readthedocs.io/en/latest/nodes.html) - missing CPython `AST` documentation. Since we use very similar `AST` definition, most of it is applicable to us.
- CPython
    - [Grammar](https://github.com/python/cpython/blob/3.6/Grammar/Grammar)
    - [Python/ast.c](https://github.com/python/cpython/blob/3.6/Python/ast.c)

